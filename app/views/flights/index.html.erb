<%= form_with url: flights_path, method: :get do |form| %>
  <%= form.label :departure_airport_id, "Departure Airport:" %>
  <select name="departure_airport_id">
    <%= @airports.each do |airport| %>
      <% if params[:departure_airport_id].to_i == airport.id %>
        <option value="<%= airport.id %>" selected><%= airport.code %></option>
      <% else %>
        <option value="<%= airport.id %>"><%= airport.code %></option>
      <% end %>
    <% end %>
  </select>

  <%= form.label :arrival_airport_id, "Arrival Airport:" %>
  <select name="arrival_airport_id">
    <%= @airports.each do |airport| %>
      <% if params[:arrival_airport_id].to_i == airport.id %>
        <option value="<%= airport.id %>" selected><%= airport.code %></option>
      <% else %>
        <option value="<%= airport.id %>"><%= airport.code %></option>
      <% end %>
    <% end %>
  </select>

  <%= form.label :passengers, "Number of passengers:" %>
  <select name="passengers">
    <option value="1">1</option>
    <option value="2">2</option>
    <option value="3">3</option>
    <option value="4">4</option>
  </select>

  <%= form.label :date, "Date:" %>
  <select name="flight_date">
    <%= @flight_dates.each do |flight_date| %>
      <% if params[:flight_date].to_date == flight_date %>
        <option value="<%= flight_date %>" selected><%= flight_date %></option>
      <% else %>
        <option value="<%= flight_date %>"><%= flight_date %></option>
      <% end %>
      
    <% end %>
  </select>

  <%= form.submit "Search" %>
<% end %>

<table>
  <tr>
    <th>Departure Airport</th>
    <th>Arrival Aiport</th>
    <th>Flight_Date</th>
    <th>Flight_time</th>
    <th>Duration</th>
  </tr>

  <% @flights.each do |flight| %>
    <tr>
      <td><%= flight.departure_airport.code %></td>
      <td><%= flight.arrival_airport.code %></td>
      <td><%= flight.flight_date %></td>
      <td><%= flight.flight_time %></td>
      <td><%= flight.duration %></td>
    </tr>
  <% end %>
</table>

